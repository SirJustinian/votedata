<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>By Unanimous Vote</title>
    <!-- Add Pinyon Script font for the title -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Pinyon+Script&display=swap" rel="stylesheet">
    <style>
body {
    font-family: 'Roboto', sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    min-height: 100vh;
    margin: 0;
    background: 
        url('https://www.transparenttextures.com/patterns/paper-fibers.png'), 
        linear-gradient(rgba(255, 248, 230, 0.9), rgba(250, 240, 220, 0.9));
    background-size: cover;
    background-blend-mode: overlay;
    color: #333;
    padding: 0;
    overflow: hidden;
    animation: fadeIn 1s ease-in-out;
}

        .title-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background-color: rgba(244, 225, 193, 0.9); /* Light background for readability */
            padding: 20px 0;
            z-index: 10; /* Keep title on top */
            text-align: center;
        }

        .title {
            font-family: 'Pinyon Script', cursive;
            font-size: 60px;
            font-weight: 700;
            color: #333;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.2);
            word-wrap: break-word;
        }

        .subheader {
            font-size: 20px;
            color: #555;
            font-style: italic;
        }

        .vote-box {
            text-align: center;
            background-color: rgba(255, 255, 255, 0.9);
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 900px;
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
            margin-top: 180px; /* Increased margin to add space between title/subtitle and text box */
        }

        .vote-box:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
        }

        button {
            padding: 12px 24px;
            background-color: #3C3B6E;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 18px;
            transition: background-color 0.3s, transform 0.2s ease-in-out;
        }

        button:hover {
            background-color: #2B2A5B;
            transform: scale(1.05);
        }

        .vote-text {
            font-size: 28px;
            font-style: italic;
            margin-bottom: 20px;
            color: #000;
            transition: opacity 0.5s ease;
        }

        .read-more {
            color: #3C3B6E;
            cursor: pointer;
            font-size: 16px;
        }

        .congress {
            font-size: 22px;
            font-weight: 500;
            margin-bottom: 10px;
            color: #000;
        }

        .chamber {
            font-size: 20px;
            margin-bottom: 20px;
            color: #333;
        }

        .date {
            font-size: 18px;
            color: #555;
            margin-bottom: 30px;
        }

        .about-section {
            margin-top: 40px;
            width: 100%;
            max-width: 900px;
            background-color: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .about-section h3 {
            font-size: 26px;
            color: #000;
            font-weight: 700;
            margin-bottom: 15px;
        }

        .about-section div {
            font-size: 18px;
            color: #333;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @media screen and (max-width: 768px) {
            .title {
                font-size: 8vw;
            }

            .subheader {
                font-size: 16px;
            }

            .vote-box {
                padding: 15px;
                width: 100%;
            }

            .vote-text {
                font-size: 22px;
            }

            .congress, .chamber, .date, .about-section div {
                font-size: 16px;
            }

            button {
                padding: 10px 20px;
                font-size: 16px;
            }
        }
    </style>
</head>
<body>

    <div class="title-container">
        <div class="title">By Unanimous Vote</div>
        <div class="subheader">116 Congresses. 108,108 votes. 6,271 unanimous.</div>
    </div>

    <div class="vote-box">
        <div class="vote-text" id="vote-text"></div>
        <span class="read-more" onclick="toggleReadMore()" id="read-more"></span>
        <div class="congress" id="congress"></div>
        <div class="chamber" id="chamber"></div>
        <div class="date" id="date"></div>
        <button onclick="generateVote()">New Unanimous Vote</button>
    </div>

    <div class="about-section">
        <h3>About</h3>
        <div>By Unanimous Vote is the history of America told through Congressional agreement. From treaties and education reform, to birthday wishes and a moral high horse, Congress has come to agreement in over five percent of its total votes. Most of the time, this is caused by fear, power, or ambivalence. In the rare instances, Congress comes together to unanimously enact meaningful change. What's the story behind these unanimous votes, and do we actually want them?</div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>

    <script>
        let votes = [];

        Papa.parse("https://raw.githubusercontent.com/SirJustinian/votedata/main/votes.csv", {
            download: true,
            header: true,
            complete: function(results) {
                votes = results.data;
                generateVote();
            },
            error: function(error) {
                console.error("Error loading CSV: ", error);
                alert("There was an error loading the CSV file.");
            }
        });

        function generateVote() {
            if (votes.length === 0) return;

            const randomIndex = Math.floor(Math.random() * votes.length);
            const vote = votes[randomIndex];
            const textLimit = 200;

            if (vote.text.length > textLimit) {
                document.getElementById('vote-text').textContent = vote.text.slice(0, textLimit) + "...";
                document.getElementById('read-more').textContent = "Read more";
            } else {
                document.getElementById('vote-text').textContent = vote.text;
                document.getElementById('read-more').textContent = "";
            }

            document.getElementById('read-more').setAttribute("data-full-text", vote.text);
            document.getElementById('congress').textContent = `${vote.congress}`;
            document.getElementById('chamber').textContent = `Chamber: ${vote.chamber}`;
            document.getElementById('date').textContent = `Date: ${vote.date}`;
        }

        function toggleReadMore() {
            const voteText = document.getElementById('vote-text');
            const readMore = document.getElementById('read-more');
            const fullText = readMore.getAttribute("data-full-text");

            if (voteText.textContent.endsWith("...")) {
                voteText.textContent = fullText;
                readMore.textContent = "Show less";
            } else {
                voteText.textContent = fullText.slice(0, 200) + "...";
                readMore.textContent = "Read more";
            }
        }
    </script>

</body>
</html>
