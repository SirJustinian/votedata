<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>By Unanimous Vote</title>
    <!-- Add Pinyon Script font for the title -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Pinyon+Script&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            min-height: 100vh;
            margin: 0;
            background: 
                url('https://www.transparenttextures.com/patterns/paper-fibers.png'), 
                linear-gradient(rgba(255, 248, 230, 0.9), rgba(250, 240, 220, 0.9));
            background-size: cover;
            background-blend-mode: overlay;
            color: #333;
            padding: 0;
            animation: fadeIn 1s ease-in-out;
            overflow-y: auto;
        }

        .title-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background-color: rgba(244, 225, 193, 0.9);
            padding: 20px 0;
            z-index: 10;
            text-align: center;
        }

        .title {
            font-family: 'Pinyon Script', cursive;
            font-size: 60px;
            font-weight: 700;
            color: #333;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.2);
        }

        .subheader {
            font-size: 20px;
            color: #555;
            font-style: italic;
        }

        .vote-box {
            text-align: center;
            background-color: rgba(255, 255, 255, 0.9);
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 900px;
            margin-top: 180px;
        }

        .vote-box:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
        }

        button {
            padding: 12px 24px;
            background-color: #3C3B6E;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 18px;
            transition: background-color 0.3s, transform 0.2s ease-in-out;
        }

        button:hover {
            background-color: #2B2A5B;
            transform: scale(1.05);
        }

        .vote-text {
            font-size: 28px;
            font-style: italic;
            margin-bottom: 20px;
            color: #000;
        }

        .congress {
            font-size: 22px;
            font-weight: 500;
            margin-bottom: 10px;
            color: #000;
        }

        .chamber {
            font-size: 20px;
            margin-bottom: 20px;
            color: #333;
        }

        .date {
            font-size: 18px;
            color: #555;
            margin-bottom: 30px;
        }

        .about-section {
            margin-top: 40px;
            width: 100%;
            max-width: 900px;
            background-color: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .about-section h3 {
            font-size: 26px;
            color: #000;
            font-weight: 700;
            margin-bottom: 15px;
        }

        .about-section div {
            font-size: 18px;
            color: #333;
        }

        .signup-section {
            margin-top: 40px;
            margin-bottom: 20px;
            background-color: rgba(255, 255, 255, 0.9);
            padding: 20px;
            padding-bottom: 30px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            max-width: 500px;
        }

        .signup-section button {
            padding: 12px 24px;
            background-color: #B31942;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 18px;
            transition: background-color 0.3s, transform 0.2s ease-in-out;
        }

        .signup-section button:hover {
            background-color: #941537;
            transform: scale(1.05);
        }

        .read-more {
            color: #007BFF;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
        }

        @media screen and (max-width: 768px) {
            .title {
                font-size: 8vw;
            }

            .subheader {
                font-size: 16px;
            }

            .vote-box {
                padding: 15px;
                width: 85%;
            }

            .vote-text {
                font-size: 22px;
            }

            .congress, .chamber, .date, .about-section div {
                font-size: 16px;
            }

            button {
                padding: 10px 20px;
                font-size: 16px;
            }

            .about-section {
                padding: 20px;
                width: 85%;
                box-sizing: border-box;
                margin-bottom: 30px;
            }

            .signup-section {
                padding: 20px;
                width: 85%;
                box-sizing: border-box;
                margin-bottom: 20px;
            }

            body {
                padding-bottom: 240px;
            }
        }
    </style>
</head>
<body>

    <div class="title-container">
        <div class="title">By Unanimous Vote</div>
        <div class="subheader">116 Congresses. 108,108 votes. 6,271 unanimous.</div>
    </div>

    <div class="vote-box">
        <div class="vote-text" id="vote-text"></div>
        <span class="read-more" id="read-more" onclick="toggleReadMore()">Read more</span>
        <div class="congress" id="congress"></div>
        <div class="chamber" id="chamber"></div>
        <div class="date" id="date"></div>
        <button onclick="generateVote()">New Unanimous Vote</button>
    </div>

    <div class="about-section">
        <h3>About</h3>
        <div>By Unanimous Vote is the history of America told through Congressional agreement. From treaties and education reform, to birthday wishes and a moral high horse, Congress has come to complete agreement in over five percent of its total votes. Most of the time, this is caused by fear, power, or ambivalence. In the rare instances, Congress comes together to unanimously enact meaningful change. 
            <br> <br> Let us remember, for better or worse, the issues that brought us together. Let us learn from our commonalities, not our differences. A longer project is in the works to explore these issues in greater detail. 
            <br> <br> All roll call vote data was gathered from www.voteview.com and www.govtrack.us. Data will be added and refined over time. </div>
    </div>

    <div class="signup-section">
        <h3>Stay Updated</h3>
        <p>Join our mailing list for updates on future By Unanimous Vote projects. Emails will not be sold or used for other purposes.</p>
        <a href="http://eepurl.com/iam-0H" target="_blank">
            <button type="button">MailChimp Signup</button>
        </a>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <script>
        let votes = [];
        let isExpanded = false; // Track if the text is expanded

        Papa.parse("https://raw.githubusercontent.com/SirJustinian/votedata/main/votes.csv", {
            download: true,
            header: true,
            complete: function(results) {
                votes = results.data;
                generateVote();
            },
            error: function(error) {
                console.error("Error loading CSV: ", error);
                alert("There was an error loading the CSV file.");
            }
        });

        function generateVote() {
            if (votes.length === 0) return;

            // Reset 'isExpanded' when generating a new vote
            isExpanded = false;
            document.getElementById('read-more').textContent = "Read more";

            const randomIndex = Math.floor(Math.random() * votes.length);
            const vote = votes[randomIndex];
            let voteText = vote.text;

            // If the vote text is long, truncate it and show 'Read more'
            if (voteText.length > 200) {
                voteText = voteText.slice(0, 200) + "...";
                document.getElementById('read-more').style.display = "inline"; // Show Read more
            } else {
                document.getElementById('read-more').style.display = "none"; // Hide Read more if text is short
            }

            document.getElementById('vote-text').textContent = voteText;
            document.getElementById('congress').textContent = `${vote.congress}`;
            document.getElementById('chamber').textContent = `Chamber: ${vote.chamber}`;
            document.getElementById('date').textContent = `Date: ${vote.date}`;
        }

        function toggleReadMore() {
            const voteTextElem = document.getElementById('vote-text');
            const vote = votes.find(v => v.text.startsWith(voteTextElem.textContent.slice(0, 20)));

            if (isExpanded) {
                voteTextElem.textContent = vote.text.slice(0, 200) + "...";
                document.getElementById('read-more').textContent = "Read more";
            } else {
                voteTextElem.textContent = vote.text;
                document.getElementById('read-more').textContent = "Read less";
            }
            isExpanded = !isExpanded;
        }
    </script>

</body>
</html>
